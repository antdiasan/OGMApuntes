# 3.5 Selectores avanzados y combinadores

En esta lecci√≥n ampliamos el repertorio de selectores con **atributos, pseudoclases, pseudoelementos** y los **combinadores** para seleccionar elementos seg√∫n su **relaci√≥n en el √°rbol HTML**.

---

## 1) Selectores de **atributo**

Permiten seleccionar elementos seg√∫n la presencia o el valor de un atributo.

```css
/* Presencia del atributo */
a[target] { text-decoration: underline; }

/* Igualdad exacta */
a[target="_blank"] { color: crimson; }

/* Comienza por‚Ä¶ */
img[src^="icons/"] { width: 32px; height: 32px; }

/* Termina en‚Ä¶ */
a[href$=".pdf"] { padding-left: 20px; }

/* Contiene‚Ä¶ */
input[name*="user"] { background: #f8faff; }

/* Valor separado por espacios (clases ‚Äútokenizadas‚Äù) */
[class~="tag"] { border: 1px solid #999; }

/* Valor con guion: lang-es, lang-es-ES‚Ä¶ */
[lang|="es"] { font-style: italic; }
```

---

## 2) **Pseudoclases** (estado de un elemento)

### 2.1 Interacci√≥n / formularios
```css
a:hover   { text-decoration: underline; }  /* rat√≥n encima */
a:active  { opacity: .8; }                 /* durante el clic */
input:focus { outline: 2px solid #4c9aff; }/* foco de teclado */
input:required { border-left: 3px solid #d33; }
input:disabled { background: #eee; }
input:checked  { accent-color: #0a7; }     /* checkbox/radio marcados */
```

### 2.2 Estructurales
```css
/* Primer/√∫ltimo hijo */
li:first-child { font-weight: bold; }
li:last-child  { color: #555; }

/* √önico hijo */
p:only-child { margin: 0; }

/* En√©simo hijo (f√≥rmulas:  odd, even, an+b ) */
tr:nth-child(even) { background: #f7f7f7; }
article:nth-of-type(2) { border-top: 2px solid #ccc; }

/* Negaci√≥n */
button:not(.primario) { opacity: .7; }
```

> `:nth-child(an+b)` selecciona posiciones que cumplen la f√≥rmula (por ejemplo `2n` ‚Üí pares, `2n+1` ‚Üí impares).  
> `:nth-of-type()` cuenta solo elementos del **mismo tipo** (etiqueta).

---

## 3) **Pseudoelementos** (partes de un elemento)

```css
p::first-line   { text-transform: uppercase; }
p::first-letter { font-size: 180%; font-weight: 700; }

/* Inserci√≥n de contenido decorativo */
.badge::before {
  content: "‚òÖ ";
  color: orange;
}
.boton::after {
  content: " ‚Üó";
  font-size: .9em;
}
```

> Los pseudoelementos m√°s usados son `::before` y `::after` (requieren `content`). Se usan para **decoraci√≥n**, no para contenido esencial.

---

## 4) **Combinadores** (relaciones en el DOM)

Los combinadores permiten seleccionar elementos por su relaci√≥n en el **√°rbol HTML**.

### HTML de ejemplo
```html
<div id="caja">
  <p>Hijo directo de div</p>
  <section>
    <p>Descendiente (nieto) de div</p>
  </section>
  <h2>T√≠tulo</h2>
  <p>Hermano del h2, justo despu√©s</p>
  <p>Otro p√°rrafo, hermano posterior</p>
</div>
```

### CSS
```css
/* 1) Descendiente (espacio): cualquier nivel dentro */
#caja p { color: steelblue; }

/* 2) Hijo directo (>): solo nivel inmediato */
#caja > p { font-weight: bold; }  /* solo el primer <p> */

/* 3) Hermano adyacente (+): el siguiente hermano inmediato */
h2 + p { color: tomato; }         /* el <p> justo tras el <h2> */

/* 4) Hermanos generales (~): todos los hermanos posteriores */
h2 ~ p { border-top: 1px dashed #ccc; }
```

üîé **Diferencia clave**:  
- **Descendiente** selecciona hijos, nietos, etc.  
- **Hijo directo** selecciona **solo** los hijos inmediatos.  
- **+** elige **un** hermano justo despu√©s; **~** elige **todos** los posteriores.

---

## 5) Selectores ‚Äúcomod√≠n‚Äù √∫tiles

```css
/* Universal: cuidado con el rendimiento si se abusa */
* { box-sizing: border-box; }

/* Agrupaci√≥n para compartir reglas */
h1, h2, h3 { font-family: system-ui, sans-serif; }

/* :is() para escribir combinaciones m√°s legibles */
:is(header, footer, main) a { color: #124; }

/* :where() como :is() pero con especificidad 0 */
:where(nav ul) li { list-style: none; padding: .25rem 0; }
```

---

## Buenas pr√°cticas

| ‚úîÔ∏è Hacer | ‚ùå Evitar |
|---|---|
| Usar **clases** para estilo; reservar **id** para anclas/JS. | Profundidades muy largas de selectores (dif√≠ciles de mantener). |
| Preferir `:is()`/`:where()` para combinaciones legibles. | Abusar del selector universal `*` en producci√≥n. |
| A√±adir ejemplos HTML al ense√±ar combinadores. | Insertar contenido esencial con `::before/::after`. |
| Probar `:hover` y `:focus` para accesibilidad teclado/rat√≥n. | Selectores de atributo complejos en listas muy grandes. |

---

## üìå Resumen

- Los **atributos** permiten filtrar por valores (`^=`, `$=`, `*=`‚Ä¶).  
- Las **pseudoclases** reaccionan a **estado** e **√≠ndice estructural**.  
- Los **pseudoelementos** estilizan **partes** de un elemento (`::before`, `::after`).  
- Los **combinadores** seleccionan por **relaci√≥n**: descendiente, hijo directo, hermano adyacente y hermanos generales.
